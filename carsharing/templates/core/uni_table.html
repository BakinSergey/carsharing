<div id={{ table_id }}>
    <style>
        table {
            border-collapse: collapse;
        }

        th, td {
            border: 3px solid darkgreen;
            padding: 2px 5px;
            text-align: center;
        }
    </style>

    <table>
        <thead>
        <tr>
            {% for h in table_headers %}
                <th class="sort" data-sort="{{ h }}">{{ h }}</th>
            {% endfor %}
        </tr>
        </thead>
        {# class list => List.js magic #}
        <tbody class="list">
        {% for rowdata in table_data %}
            <tr>
                {% for cell in rowdata %}
                    {#                    {% if forloop.first %}#}
                    {#                        <td class="id" style="display:none;">{{ forloop.counter }}</td>#}
                    {#                    {% else %}#}
                    {% if forloop.counter == 3 %}
                        <td class="cardata-{{ forloop.counter }}">{{ cell | safe }}</td>
                    {% else %}
                        <td class="cardata-{{ forloop.counter }}">{{ cell }}</td>
                    {% endif %}

                    {#                    {% endif %}#}
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {# таблица для редактирования на стороне клиента #}
    {#    <table>#}
    {#        <td class="id">#}
    {#            <input type="hidden" id="id-field"/>#}
    {#        </td>#}
    {#        {% for h in table_headers %}#}
    {#            <td class={{ h }}>#}
    {#                <input type="text" id="{{ h }}-field" placeholder="{{ h }}"/>#}
    {#            </td>#}
    {#        {% endfor %}#}
    {##}
    {#        <td class="add">#}
    {#            <button id="add-btn">Add</button>#}
    {#            <button id="edit-btn">Edit</button>#}
    {#        </td>#}
    {#    </table>#}
    {##}
    {#    <p>based on List.js</p>#}
</div>

{#<script>#}
{#https://codepen.io/javve/pen/cLdfw#}
{##}
{#var options = {#}
{#    valueNames: ['id', 'name', 'age', 'city']#}
{# };#}
{##}
{#    var options = {#}
{#        valueNames: {{ table_headers }}#}
{#    };#}
{##}
{#    // Init list#}
{#    var contactList = new List('contacts', options);#}
{##}
{#    var idField = $('#id-field'),#}
{##}
{#        {% for h in table_headers %}#}
{##}
{##}
{##}
{#        {% endfor %}#}
{#        nameField = $('#name-field'),#}
{#        ageField = $('#age-field'),#}
{#        cityField = $('#city-field'),#}
{#        addBtn = $('#add-btn'),#}
{#        editBtn = $('#edit-btn').hide(),#}
{#        removeBtns = $('.remove-item-btn'),#}
{#        editBtns = $('.edit-item-btn');#}
{##}
{#    // Sets callbacks to the buttons in the list#}
{#    refreshCallbacks();#}
{##}
{#    addBtn.click(function () {#}
{#        contactList.add({#}
{#            id: Math.floor(Math.random() * 110000),#}
{#            name: nameField.val(),#}
{#            age: ageField.val(),#}
{#            city: cityField.val()#}
{#        });#}
{#        clearFields();#}
{#        refreshCallbacks();#}
{#    });#}
{##}
{#    editBtn.click(function () {#}
{#        var item = contactList.get('id', idField.val())[0];#}
{#        item.values({#}
{#            id: idField.val(),#}
{#            name: nameField.val(),#}
{#            age: ageField.val(),#}
{#            city: cityField.val()#}
{#        });#}
{#        clearFields();#}
{#        editBtn.hide();#}
{#        addBtn.show();#}
{#    });#}
{##}
{#    function refreshCallbacks() {#}
{#        // Needed to add new buttons to jQuery-extended object#}
{#        removeBtns = $(removeBtns.selector);#}
{#        editBtns = $(editBtns.selector);#}
{##}
{#        removeBtns.click(function () {#}
{#            var itemId = $(this).closest('tr').find('.id').text();#}
{#            contactList.remove('id', itemId);#}
{#        });#}
{##}
{#        editBtns.click(function () {#}
{#            var itemId = $(this).closest('tr').find('.id').text();#}
{#            var itemValues = contactList.get('id', itemId)[0].values();#}
{#            idField.val(itemValues.id);#}
{#            nameField.val(itemValues.name);#}
{#            ageField.val(itemValues.age);#}
{#            cityField.val(itemValues.city);#}
{##}
{#            editBtn.show();#}
{#            addBtn.hide();#}
{#        });#}
{#    }#}
{##}
{#    function clearFields() {#}
{#        nameField.val('');#}
{#        ageField.val('');#}
{#        cityField.val('');#}
{#    }#}
{##}
{##}
{#</script>#}